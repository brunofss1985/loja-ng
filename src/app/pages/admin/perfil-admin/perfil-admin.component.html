<div class="container">
    <div class="app-card">
        <div class="topbar">
                    <div class="perfil-mini">
                    <div class="avatar">{{ currentUser.name ? ((currentUser.name | slice:0:2) | uppercase) : 'AD' }}</div>
                <div class="perfil-info">
                    <h1>Perfil do Administrador</h1>
                              <p>{{ currentUser.email }}</p>
                </div>
            </div>
        </div>

        <div class="content">
                    <div class="card dados-pessoais-card">
                <div class="card-header">
                    <i class="fas fa-user-edit"></i>
                    <h3>Dados Pessoais</h3>
                </div>

                <form [formGroup]="perfilForm" (ngSubmit)="salvarPerfil()">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Nome</label>
                            <input id="name" type="text" formControlName="name" />
                            <div *ngIf="perfilForm.controls['name'].invalid && perfilForm.controls['name'].touched" class="invalid-text">
                                <small *ngIf="perfilForm.controls['name'].errors?.['required']">Nome obrigatório</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input id="email" type="email" formControlName="email" />
                            <div *ngIf="perfilForm.controls['email'].invalid && perfilForm.controls['email'].touched" class="invalid-text">
                                <small *ngIf="perfilForm.controls['email'].errors?.['required']">E-mail obrigatório</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="userType">Tipo de Usuário</label>
                            <input id="userType" type="text" formControlName="userType" [disabled]="true" />
                        </div>

                        <div class="form-group">
                            <label for="phone">Telefone</label>
                            <input id="phone" type="text" formControlName="phone" />
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="address">Endereço</label>
                        <input id="address" type="text" formControlName="address" />
                    </div>

                    <button type="submit" [disabled]="perfilForm.invalid" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar alterações
                    </button>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <i class="fas fa-lock"></i>
                    <h3>Alterar Senha</h3>
                </div>

                <form [formGroup]="passwordForm" (ngSubmit)="mudarSenha()">
                    <div class="form-group">
                        <label for="currentPassword">Senha atual</label>
                        <input id="currentPassword" type="password" formControlName="currentPassword" />
                        <div *ngIf="passwordForm.controls['currentPassword'].invalid && passwordForm.controls['currentPassword'].touched" class="invalid-text">
                            <small *ngIf="passwordForm.controls['currentPassword'].errors?.['required']">Senha atual obrigatória</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="newPassword">Nova senha</label>
                        <input id="newPassword" type="password" formControlName="newPassword" />
                        <div *ngIf="passwordForm.controls['newPassword'].invalid && passwordForm.controls['newPassword'].touched" class="invalid-text">
                            <small *ngIf="passwordForm.controls['newPassword'].errors?.['required']">Nova senha obrigatória</small>
                            <small *ngIf="passwordForm.controls['newPassword'].errors?.['minlength']">Mínimo 6 caracteres</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="newPasswordConfirm">Confirmar senha</label>
                        <input id="newPasswordConfirm" type="password" formControlName="newPasswordConfirm" />
                        <div *ngIf="passwordForm.controls['newPasswordConfirm'].invalid && passwordForm.controls['newPasswordConfirm'].touched" class="invalid-text">
                            <small *ngIf="passwordForm.controls['newPasswordConfirm'].errors?.['required']">Confirmação obrigatória</small>
                        </div>
                        <div *ngIf="passwordForm.hasError('passwordMismatch')" class="invalid-text">
                            <small>Senhas não coincidem</small>
                        </div>
                    </div>

                    <button type="submit" [disabled]="passwordForm.invalid" class="btn btn-secondary">
                        <i class="fas fa-key"></i>
                        Alterar senha
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>